<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="&amp;#x6700;&amp;#x8FD1;&amp;#x5728;&amp;#x505A;&amp;#x624B;&amp;#x673A;&amp;#x6E38;&amp;#x620F;&amp;#x5F80;&amp;#x5FAE;&amp;#x4FE1;&amp;#x5C0F;&amp;#x6E38;&amp;#x620F;&amp;#x79FB;&amp;#x690D;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x8BD5;&amp;#x56FE;&amp;#x5C06;&amp;#x4E00;&amp;#x4E2A;&amp;#x5728;">
<meta name="keywords" content="egret,h5game,gulp">
<meta property="og:type" content="article">
<meta property="og:title" content="使用Gulp构建Egret微信小游戏">
<meta property="og:url" content="http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/index.html">
<meta property="og:site_name" content="Yemi&#39;s Blog">
<meta property="og:description" content="&amp;#x6700;&amp;#x8FD1;&amp;#x5728;&amp;#x505A;&amp;#x624B;&amp;#x673A;&amp;#x6E38;&amp;#x620F;&amp;#x5F80;&amp;#x5FAE;&amp;#x4FE1;&amp;#x5C0F;&amp;#x6E38;&amp;#x620F;&amp;#x79FB;&amp;#x690D;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x8BD5;&amp;#x56FE;&amp;#x5C06;&amp;#x4E00;&amp;#x4E2A;&amp;#x5728;">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-07-21T10:24:52.716Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用Gulp构建Egret微信小游戏">
<meta name="twitter:description" content="&amp;#x6700;&amp;#x8FD1;&amp;#x5728;&amp;#x505A;&amp;#x624B;&amp;#x673A;&amp;#x6E38;&amp;#x620F;&amp;#x5F80;&amp;#x5FAE;&amp;#x4FE1;&amp;#x5C0F;&amp;#x6E38;&amp;#x620F;&amp;#x79FB;&amp;#x690D;&amp;#x3002;&amp;#x6211;&amp;#x4EEC;&amp;#x8BD5;&amp;#x56FE;&amp;#x5C06;&amp;#x4E00;&amp;#x4E2A;&amp;#x5728;">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.png">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
          
        
    
    <!-- title -->
    <title>使用Gulp构建Egret微信小游戏</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://artwork.yemi.me/">Artworks</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/07/01/stable-fluid/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/05/22/unity-code-analysis/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&text=使用Gulp构建Egret微信小游戏"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&is_video=false&description=使用Gulp构建Egret微信小游戏"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=使用Gulp构建Egret微信小游戏&body=Check out this article: http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&name=使用Gulp构建Egret微信小游戏&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#项目需求"><span class="toc-number">1.</span> <span class="toc-text">项目需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quick-start"><span class="toc-number">2.</span> <span class="toc-text">Quick Start</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建开发说明"><span class="toc-number">3.</span> <span class="toc-text">构建开发说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置文件"><span class="toc-number">3.1.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#同步egertweixinsupport到导出的微信工程"><span class="toc-number">3.2.</span> <span class="toc-text">同步EgertWeixinSupport到导出的微信工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#通过命令行启动微信开发者工具"><span class="toc-number">3.3.</span> <span class="toc-text">通过命令行启动微信开发者工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用tiny-png进行图片压缩"><span class="toc-number">3.4.</span> <span class="toc-text">使用Tiny Png进行图片压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json压缩"><span class="toc-number">3.5.</span> <span class="toc-text">Json压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#egret使用远程资源与本地资源模式切换"><span class="toc-number">3.6.</span> <span class="toc-text">Egret使用远程资源与本地资源模式切换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gulpfile.js"><span class="toc-number">4.</span> <span class="toc-text">GulpFile.js</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        使用Gulp构建Egret微信小游戏
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">Yemi's Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-06-12T14:54:57.000Z" itemprop="datePublished">2018-06-12</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/egret/">egret</a>, <a class="tag-link" href="/tags/gulp/">gulp</a>, <a class="tag-link" href="/tags/h5game/">h5game</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>&#x6700;&#x8FD1;&#x5728;&#x505A;&#x624B;&#x673A;&#x6E38;&#x620F;&#x5F80;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x79FB;&#x690D;&#x3002;&#x6211;&#x4EEC;&#x8BD5;&#x56FE;&#x5C06;&#x4E00;&#x4E2A;&#x5728;iOS&#x4E0A;&#x80FD;&#x591F;&#x6D88;&#x8017;600M&#x5185;&#x5B58;&#x3001;&#x573A;&#x666F;&#x4E2D;&#x8D85;&#x8FC7;10W&#x4E2A;gameobject&#x7684;Unity&#x6E38;&#x620F;&#x79FB;&#x690D;&#x5230;&#x53EA;&#x5141;&#x8BB8;4M&#x4EE3;&#x7801;&#x5305;&#x5927;&#x5C0F;&#x3001;50M&#x8D44;&#x6E90;&#x7F13;&#x5B58;&#x7684;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x5E73;&#x53F0;&#x4E0A;&#x3002;&#x7531;&#x4E8E;&#x539F;&#x5148;&#x7684;&#x9879;&#x76EE;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x6CA1;&#x6709;&#x6309;&#x7167;&#x7A0B;&#x5E8F;&#x5236;&#x5B9A;&#x7684;&#x6807;&#x51C6;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;TA&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x8FD9;&#x771F;&#x662F;&#x4E2A;&#x5F02;&#x5E38;&#x8270;&#x5DE8;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>
<p>&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x7B2C;&#x4E00;&#x6B65;&#x5DF2;&#x7ECF;&#x5C06;&#x521D;&#x671F;60M&#x7684;&#x8D44;&#x6E90;&#x538B;&#x7F29;&#x5230;&#x4E86;26M&#x8FD8;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x538B;&#x7F29;&#xFF0C;&#x4F3C;&#x4E4E;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x5728;50M&#x4EE5;&#x5185;&#x4F3C;&#x4E4E;&#x6BD4;&#x8F83;&#x4E50;&#x89C2;&#x7684;&#x3002;</p>
<p>&#x914D;&#x5408;&#x8D44;&#x6E90;&#x538B;&#x7F29;&#x7684;gulp&#x81EA;&#x52A8;&#x6784;&#x5EFA;&#x5DF2;&#x7ECF;&#x521D;&#x6B65;&#x642D;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x5F00;&#x53D1;&#x7684;&#x8BB0;&#x5F55;&#x3002;</p>
<h2 id="&#x9879;&#x76EE;&#x9700;&#x6C42;">&#x9879;&#x76EE;&#x9700;&#x6C42;</h2>
<p>Egret&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x5BFC;&#x51FA;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x5DE5;&#x7A0B;&#x3002;&#x4E00;&#x79CD;&#x662F;&#x5728;EgretLauncher&#x4E2D;&#x624B;&#x52A8;&#x5BFC;&#x51FA;&#x3002;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x662F;&#x4F7F;&#x7528;cli&#x547D;&#x4EE4;<code>egret publish</code>&#x6216;<code>egret run</code>&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x5BFC;&#x51FA;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x5728;&#x5BFC;&#x51FA;&#x6709;bug,&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x540C;&#x6B65;EgretWeixinSupport&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x5230;&#x5BFC;&#x51FA;&#x5DE5;&#x7A0B;,&#x4F1A;&#x4F7F;&#x5F97;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5931;&#x8D25;&#x3002;&#x540C;&#x65F6;&#x7531;&#x4E8E;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x7684;&#x4EE3;&#x7801;&#x5305;&#x5927;&#x5C0F;&#x9650;&#x5236;&#xFF0C;&#x6E38;&#x620F;&#x8D44;&#x6E90;&#x5FC5;&#x987B;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x9700;&#x8981;&#x5728;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#x4E2D;&#x6DFB;&#x52A0;&#x5BF9;&#x8D44;&#x6E90;&#x5904;&#x7406;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x4F7F;&#x7528;EgretLauncher&#x8FDB;&#x884C;&#x5BFC;&#x51FA;&#x5C31;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x6784;&#x5EFA;&#x6765;&#x8BF4;&#xFF0C;Egret&#x9879;&#x76EE;&#x652F;&#x6301;&#x6269;&#x5C55;cli&#x547D;&#x4EE4;&#xFF0C;&#x76F8;&#x5173;&#x6587;&#x6863;&#x5728;<a href="http://developer.egret.com/cn/github/egret-docs/Engine2D/projectConfig/cmdExtensionPlugin/index.html" target="_blank" rel="noopener">&#x547D;&#x4EE4;&#x884C;&#x6269;&#x5C55;&#x63D2;&#x4EF6;</a>&#x3002;&#x7531;&#x4E8E;Egret&#x9879;&#x76EE;&#x7ED3;&#x6784;&#x4E0D;&#x662F;&#x6807;&#x51C6;&#x7684;npm&#x9879;&#x76EE;&#xFF0C;&#x4E5F;&#x5C31;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528;node.js&#x7684;&#x5927;&#x91CF;&#x5DE5;&#x5177;&#x548C;&#x5E93;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x8FC7;Egret&#x4E2D;&#x7684;scrip&#x8FDB;&#x884C;&#x6269;&#x5C55;&#x9650;&#x5236;&#x8F83;&#x5927;&#x3002;</p>
<p>&#x6700;&#x540E;&#x662F;&#x5355;&#x72EC;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;gulp&#x7684;&#x9879;&#x76EE;&#x81EA;&#x52A8;&#x6784;&#x5EFA;&#xFF0C;&#x5177;&#x6709;&#x5982;&#x4E0B;&#x7684;Feature&#xFF1A;</p>
<ul>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x884C;&#x5BFC;&#x51FA;&#xFF0C;&#x4F7F;&#x7528;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x7684;&#x7248;&#x672C;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x7684;&#x7248;&#x672C;</li>
<li>&#x652F;&#x6301;&#x81EA;&#x52A8;&#x5C06;Resource&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x8D44;&#x6E90;&#x4E0A;&#x4F20;&#x5230;AliyunOSS&#xFF08;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;gulp&#x63D2;&#x4EF6;&#x5B9E;&#x73B0;&#x5176;&#x4ED6;Server&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF09;</li>
<li>&#x652F;&#x6301;&#x4F7F;&#x7528;<a href="https://tinypng.com/" target="_blank" rel="noopener">TinyPNG</a>&#x5BF9;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x538B;&#x7F29;</li>
<li>&#x8D44;&#x6E90;&#x5904;&#x7406;&#x7F13;&#x5B58;&#x652F;&#x6301;&#xFF0C;&#x4F18;&#x5316;&#x591A;&#x6B21;&#x6784;&#x5EFA;&#x7684;&#x65F6;&#x95F4;</li>
</ul>
<h2 id="quick-start">Quick Start</h2>
<p><strong>&#x73AF;&#x5883;&#x914D;&#x7F6E;</strong> - &#x5B89;&#x88C5;Node.js 8.11&#x6700;&#x65B0;&#x7684;LTS&#x7248;&#x672C; - &#x4F7F;&#x7528;<code>npm i -g gulp</code> &#x5B89;&#x88C5;gulp - &#x5B89;&#x88C5;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177; - &#x5B89;&#x88C5;&#x767D;&#x9E6D;&#x5F15;&#x64CE;&#x5FAE;&#x4FE1;&#x5BFC;&#x51FA;&#x5E93;</p>
<p><strong>&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x8BF4;&#x660E;</strong></p>
<p>&#x7531;&#x4E8E;egret&#x9879;&#x76EE;&#x5728;&#x6253;&#x5305;&#x65F6;&#x4F1A;&#x5C06;&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x6574;&#x4F53;&#x6DFB;&#x52A0;&#x5230;tsc&#x7684;include&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x5728;&#x6539;&#x76EE;&#x5F55;&#x4E0B;&#x6DFB;&#x52A0;gulpfile.js&#x6216;&#x8005;&#x662F;package.json&#x6587;&#x4EF6;&#x3002; &#x4F1A;&#x5BFC;&#x81F4;<code>egret build</code> &#x547D;&#x4EE4;&#x884C;&#x51FA;&#x9519;&#x3002;&#x6240;&#x4EE5;&#x5C06;<code>gulpfile.js</code>&#x653E;&#x5728;&#x9879;&#x76EE;&#x5DE5;&#x7A0B;&#x7684;&#x4E0A;&#x7EA7;&#x76EE;&#x5F55;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Mode                LastWriteTime         Length Name</span><br><span class="line">----                -------------         ------ ----</span><br><span class="line">d-----         2018/6/8     15:36                Cache                        ///&#x81EA;&#x52A8;&#x6784;&#x5EFA;&#x7684;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x76EE;&#x5F55;</span><br><span class="line">d-----         2018/6/8     18:09                node_modules </span><br><span class="line">d-----         2018/6/8     15:35                TestMap                       //Egret &#x5DE5;&#x7A0B;&#x76EE;&#x5F55;</span><br><span class="line">d-----        2018/6/11     14:16                TestMap_res_953fb879118301           //Egret &#x5DE5;&#x7A0B;&#x5BFC;&#x51FA;&#x7684;&#x8D44;&#x6E90;&#x76EE;&#x5F55;</span><br><span class="line">d-----        2018/6/11     14:16                TestMap_wxgame                   //Egret &#x5DE5;&#x7A0B;&#x5BFC;&#x51FA;&#x7684;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x5DE5;&#x7A0B;</span><br><span class="line">-a----         2018/6/8     15:12             91 .gitignore</span><br><span class="line">-a----        2018/6/12     12:35            858 config.json                      //&#x81EA;&#x52A8;&#x6784;&#x5EFA;&#x8BFB;&#x53D6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line">-a----         2018/6/7     11:38              0 egret_publish.bat</span><br><span class="line">-a----         2018/6/7     11:37              8 egret_run.bat</span><br><span class="line">-a----         2018/6/7     11:52             15 egret_run_remote.bat</span><br><span class="line">-a----        2018/6/12     12:35           9906 gulpfile.js                      //gulp&#x811A;&#x672C;</span><br><span class="line">-a----         2018/6/8     18:09            774 package.json</span><br></pre></td></tr></table></figure>
<p><strong>gulp task</strong></p>
<p>gulpfile.js&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;&#x591A;&#x4E2A;task&#xFF0C;&#x4F7F;&#x7528;<a href="https://github.com/teambition/gulp-sequence" target="_blank" rel="noopener">gulpSeq</a>&#x5B9E;&#x73B0;&#x591A;&#x4EFB;&#x52A1;&#x7684;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;</p>
<p>&#x4E3B;&#x8981;&#x7684;&#x4E24;&#x4E2A;task&#x4E3A; <code>run_remote</code>&#x548C;<code>run</code>&#x3002;</p>
<p>run_remote&#x4F1A;&#x4F7F;&#x7528;<code>egret build</code>&#x5BFC;&#x51FA;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x5DE5;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x5C06;resource&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x8D44;&#x6E90;&#x5904;&#x7406;&#x4E4B;&#x540E;&#x4E0A;&#x4F20;&#x5230;aliyunOSS&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6700;&#x540E;&#x914D;&#x7F6E;egret&#x9879;&#x76EE;&#x4F7F;&#x7528;OSS&#x4E0A;&#x4F20;&#x7684;&#x8D44;&#x6E90;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x62C9;&#x8D77;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x3002;</p>
<p>&#x800C;run&#x76F4;&#x63A5;&#x662F;&#x5BFC;&#x51FA;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x5DE5;&#x7A0B;&#x540E;&#x76F4;&#x63A5;&#x5904;&#x7406;&#x8D44;&#x6E90;&#xFF0C;&#x6700;&#x540E;&#x62C9;&#x8D77;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x3002;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&quot;run_remote&quot;</span>, gulpSeq(</span><br><span class="line">    <span class="string">&quot;export_clean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;wx_copy&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;wx_setid&quot;</span>,<span class="string">&quot;copy_cisconfig&quot;</span>],</span><br><span class="line">    <span class="string">&quot;egret_build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;res_clean&quot;</span>,</span><br><span class="line">    [</span><br><span class="line">        <span class="string">&quot;res_process_img&quot;</span>,</span><br><span class="line">        <span class="string">&quot;res_process_json&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;wx_resclean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;oss_sync&quot;</span>,</span><br><span class="line">    <span class="string">&quot;run_wx&quot;</span></span><br><span class="line">));</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&quot;run&quot;</span>, gulpSeq(</span><br><span class="line">    <span class="string">&quot;export_clean&quot;</span>,</span><br><span class="line">    <span class="string">&quot;wx_copy&quot;</span>,</span><br><span class="line">    [<span class="string">&quot;wx_setid&quot;</span>,<span class="string">&quot;copy_cisconfig&quot;</span>],</span><br><span class="line">    <span class="string">&quot;egret_build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;run_wx&quot;</span></span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>&#x5728;&#x76EE;&#x5F55;&#x4E0B;&#x76F4;&#x63A5;&#x6267;&#x884C; <code>gulp run</code>&#x548C; <code>gulp run_remote</code>&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x3002;</p>
<h2 id="&#x6784;&#x5EFA;&#x5F00;&#x53D1;&#x8BF4;&#x660E;">&#x6784;&#x5EFA;&#x5F00;&#x53D1;&#x8BF4;&#x660E;</h2>
<p>&#x5728;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x6784;&#x5EFA;&#x65F6;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x4E0B;&#x9762;&#x505A;&#x4E00;&#x4E9B;&#x8BB0;&#x5F55;&#x3002;</p>
<h3 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3>
<p>&#x9879;&#x76EE;&#x76EE;&#x5F55;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>config.json</code>&#x6587;&#x4EF6;&#xFF0C;&#x7528;&#x4E8E;&#x914D;&#x7F6E;gulp&#x7684;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#x3002;</p>
<ul>
<li>projectfolder&#xFF1A; &#x5B9A;&#x4E49;&#x4E86;&#x5F53;&#x524D;egret&#x5DE5;&#x7A0B;&#x76EE;&#x5F55;</li>
<li>wxappid&#xFF1A;&#x4F1A;&#x5728;egret&#x5BFC;&#x51FA;wx&#x5DE5;&#x7A0B;&#x540E;&#x914D;&#x7F6E;</li>
<li>projectname: &#x5BFC;&#x51FA;&#x7684;wx&#x5DE5;&#x7A0B;&#x7684;&#x9879;&#x76EE;&#x540D;&#x79F0;</li>
<li>res/compressFolders&#xFF1A;&#x914D;&#x7F6E;&#x6240;&#x6709;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x7684;&#x76EE;&#x5F55;</li>
<li>ossconf&#xFF1A;aliyun OSS&#x914D;&#x7F6E;</li>
<li>ossconf_cache&#xFF1A; &#x540C;&#x6B65;OSS&#x65F6;&#x751F;&#x6210;&#x7684;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</li>
<li>server_rul&#xFF1A;&#x5FAE;&#x4FE1;&#x8D44;&#x6E90;&#x4E0B;&#x8F7D;&#x7684;&#x8FDC;&#x7A0B;&#x8DEF;&#x5F84;</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">&quot;projectfolder&quot;</span>: <span class="string">&quot;TestMap&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;wxappid&quot;</span>: <span class="string">&quot;wx6ac********&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;projectname&quot;</span>:<span class="string">&quot;testproj&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;res&quot;</span>:{</span><br><span class="line">        <span class="attr">&quot;compressFolders&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;spriteatlas&quot;</span>,</span><br><span class="line">            <span class="string">&quot;UIAtlas&quot;</span></span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">&quot;ossconf&quot;</span>:{</span><br><span class="line">        <span class="attr">&quot;connect&quot;</span>:{</span><br><span class="line">            <span class="attr">&quot;region&quot;</span>: <span class="string">&quot;oss-cn-hangzhou&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;accessKeyId&quot;</span>: <span class="string">&quot;[oss key]&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;accessKeySecret&quot;</span>:<span class="string">&quot;[oss secret]&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;bucket&quot;</span>: <span class="string">&quot;[oss buckname]&quot;</span></span><br><span class="line">        },</span><br><span class="line">        <span class="attr">&quot;controls&quot;</span>:{</span><br><span class="line">            <span class="attr">&quot;headers&quot;</span>:{</span><br><span class="line">                <span class="attr">&quot;Cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span></span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        <span class="attr">&quot;setting&quot;</span>:{</span><br><span class="line">            <span class="attr">&quot;dir&quot;</span>:<span class="string">&quot;/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;noClean&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;force&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;quiet&quot;</span>: <span class="literal">true</span></span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">&quot;ossconf_cache&quot;</span>:{</span><br><span class="line">        <span class="attr">&quot;cacheFileName&quot;</span>:<span class="string">&quot;Cache/oss/&quot;</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">&quot;server_rul&quot;</span>: <span class="string">&quot;https://test.com&quot;</span></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h3 id="&#x540C;&#x6B65;egertweixinsupport&#x5230;&#x5BFC;&#x51FA;&#x7684;&#x5FAE;&#x4FE1;&#x5DE5;&#x7A0B;">&#x540C;&#x6B65;EgertWeixinSupport&#x5230;&#x5BFC;&#x51FA;&#x7684;&#x5FAE;&#x4FE1;&#x5DE5;&#x7A0B;</h3>
<p>&#x7531;&#x4E8E;egret publish&#x7684;&#x547D;&#x4EE4;&#x884C;&#x6267;&#x884C;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#x5FAE;&#x4FE1;&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x624B;&#x52A8;&#x5C06;&#x5FAE;&#x4FE1;&#x9879;&#x76EE;&#x6A21;&#x677F;&#x6587;&#x4EF6;&#x5BFC;&#x51FA;&#x5230;<code>projname_wxgame</code>&#x76EE;&#x5F55;&#x4E2D;&#x3002;</p>
<p>&#x53C2;&#x8003;<code>gulp.task(&apos;wx_copy&apos;)</code></p>
<p>&#x5728;windows&#x4E0B;&#x8DEF;&#x5F84;&#x4E3A;<code>&lt;username&gt;\AppData\Roaming\EgretLauncher\download\EgretWeixinSupport\</code>&#x3002;</p>
<p>&#x5728;macos&#x4E2D;<code>~/Library/Application\ Support/EgretLauncher/download/EgretWeixinSupport</code></p>
<h3 id="&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;">&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</h3>
<p>&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x652F;&#x6301;&#x547D;&#x4EE4;&#x884C;&#x542F;&#x52A8;&#x81EA;&#x52A8;&#x6253;&#x5F00;&#x9879;&#x76EE;</p>
<p><code>&lt;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&gt;/cli -o &lt;projectpath&gt;</code></p>
<p>&#x6240;&#x4EE5;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x5230;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x7684;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF0C;&#x5728;macos&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;:</p>
<p><code>/Applications/wechatwebdevtools.app/Contents/Resources/app.nw/bin/cli</code>&#x3002;</p>
<p>&#x5BF9;&#x4E8E;window&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x4F1A;&#x6309;&#x7167;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x78C1;&#x76D8;&#x548C;&#x76EE;&#x5F55;&#x3002;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x4F1A;&#x5C06;&#x76EE;&#x5F55;&#x5199;&#x5165;windows&#x7684;&#x7CFB;&#x7EDF;&#x6CE8;&#x518C;&#x8868;&#xFF0C;&#x4F7F;&#x7528;<code>reg query HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Tencent\\&#x5FAE;&#x4FE1;web&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</code>&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x5FAE;&#x4FE1;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;&#x7684;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;windows&#x7684;cmd&#x5BF9;&#x4E8E;&#x4E2D;&#x6587;&#x662F;&#x4F7F;&#x7528;gbk&#x7F16;&#x7801;&#x7684;&#x800C;&#x4E0D;&#x662F;utf8&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5BF9;&#x8C03;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x8FD4;&#x56DE;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<h3 id="&#x4F7F;&#x7528;tiny-png&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x538B;&#x7F29;">&#x4F7F;&#x7528;Tiny Png&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x538B;&#x7F29;</h3>
<p>&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x5BF9;&#x4E8E;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x53EA;&#x6709;50m&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x6E38;&#x620F;&#x7684;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x6700;&#x591A;&#x6709;50M&#x3002;&#x4F7F;&#x7528;TinyPng&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x5C06;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x5230;&#x539F;&#x59CB;&#x5927;&#x5C0F;&#x7684;20%&#x3002;</p>
<p>&#x5728;&#x641C;&#x7D22;&#x4E86;&#x591A;&#x4E2A;gulp-tiny&#x63D2;&#x4EF6;&#x4E4B;&#x540E;&#x6700;&#x540E;&#x4F7F;&#x7528;<code>gulp-tinypng-nokey</code>&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x3002; &#x7531;&#x4E8E;&#x8BE5;&#x63D2;&#x4EF6;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x56FE;&#x7247;&#x7F13;&#x5B58;&#xFF0C;&#x6BCF;&#x6B21;&#x6784;&#x5EFA;&#x5982;&#x679C;&#x90FD;&#x901A;&#x8FC7;&#x7F51;&#x8DEF;&#x83B7;&#x53D6;&#x538B;&#x7F29;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x9700;&#x8981;&#x5F88;&#x957F;&#x7684;&#x65F6;&#x5019;&#x3002;&#x6240;&#x4EE5;&#x624B;&#x52A8;&#x5B9E;&#x73B0;&#x4E86;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x7684;&#x7F13;&#x5B58;&#x3002;&#x8003;&#x8651;&#x540E;&#x7EED;&#x4F7F;&#x7528;<code>gulp-remember</code>&#x7B49;&#x63D2;&#x4EF6;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x3002;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&quot;res_process_img&quot;</span>, () =&gt; {</span><br><span class="line">    <span class="keyword">return</span> gulp.src(RES_FILTER.Image)</span><br><span class="line">        .pipe(filter(<span class="function">(<span class="params">file</span>) =&gt;</span> CheckImageCache(file)))</span><br><span class="line">        .pipe(tinypng())</span><br><span class="line">        .pipe(gulp.dest(ProjectResFolder + <span class="string">&apos;/resource/assets/&apos;</span>))</span><br><span class="line">        .pipe(filter(<span class="function"><span class="params">file</span> =&gt;</span> {</span><br><span class="line">            RestoreImageToCache(file);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        }));</span><br><span class="line">});</span><br></pre></td></tr></table></figure>
<h3 id="json&#x538B;&#x7F29;">Json&#x538B;&#x7F29;</h3>
<p>&#x7531;&#x4E8E;&#x4ECE;Unity&#x5F15;&#x64CE;&#x4E2D;&#x5BFC;&#x51FA;&#x7684;&#x52A8;&#x753B;&#x6570;&#x636E;&#x5BF9;&#x4E8E;&#x6D6E;&#x70B9;&#x6570;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x7CBE;&#x5EA6;&#x7684;&#x538B;&#x7F29;&#xFF0C;&#x8F6C;&#x6210;json&#x6587;&#x4EF6;&#x540E;&#x8FD9;&#x90E8;&#x5206;&#x4F1A;&#x9020;&#x6210;&#x90E8;&#x5206;&#x7A7A;&#x95F4;&#x6D6A;&#x8D39;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x904D;&#x5386;&#x6240;&#x6709;json&#x6570;&#x636E;&#x6587;&#x4EF6;&#x5BF9;&#x6D6E;&#x70B9;&#x6570;&#x7684;&#x7CBE;&#x5EA6;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;&#x6700;&#x540E;20M&#x7684;json&#x6570;&#x636E;&#x51CF;&#x5C11;&#x4E86;6M&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FixNumber</span>(<span class="params">obj,size</span>)</span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> m <span class="keyword">in</span> obj){</span><br><span class="line">        <span class="keyword">let</span> mt = <span class="keyword">typeof</span>(obj[m]);</span><br><span class="line">        <span class="keyword">if</span>(mt === <span class="string">&apos;number&apos;</span>){</span><br><span class="line">            obj[m]=<span class="built_in">Number</span>(obj[m].toFixed(size));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(mt === <span class="string">&apos;object&apos;</span>){</span><br><span class="line">            FixNumber(obj[m],size);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x5728;gulp&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6587;&#x4EF6;&#x6D41;&#x662F;&#x57FA;&#x4E8E;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x865A;&#x62DF;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;<a href="https://github.com/gulpjs/vinyl" target="_blank" rel="noopener">vinyl</a>&#x3002;&#x8981;&#x5BF9;&#x6587;&#x4EF6;&#x6D41;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x4E5F;&#x5C31;&#x9700;&#x8981;&#x7F16;&#x5199;gulp&#x7684;&#x63D2;&#x4EF6;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#xFF1A;</p>
<p><a href="http://taobaofed.org/blog/2017/08/31/nodejs-stream/" target="_blank" rel="noopener">&#x6DF1;&#x5165;&#x7406;&#x89E3; Node.js Stream &#x5185;&#x90E8;&#x673A;&#x5236;</a></p>
<p><a href="https://segmentfault.com/a/1190000003770541" target="_blank" rel="noopener">&#x63A2;&#x7A76;Gulp&#x7684;Stream</a></p>
<p>&#x540E;&#x7EED;&#x8003;&#x8651;&#x4F7F;&#x7528;Bson&#x5BF9;json&#x6570;&#x636E;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x80FD;&#x591F;&#x66F4;&#x5927;&#x5E45;&#x5EA6;&#x5730;&#x51CF;&#x5C11;&#x8D44;&#x6E90;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<h3 id="egret&#x4F7F;&#x7528;&#x8FDC;&#x7A0B;&#x8D44;&#x6E90;&#x4E0E;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x6A21;&#x5F0F;&#x5207;&#x6362;">Egret&#x4F7F;&#x7528;&#x8FDC;&#x7A0B;&#x8D44;&#x6E90;&#x4E0E;&#x672C;&#x5730;&#x8D44;&#x6E90;&#x6A21;&#x5F0F;&#x5207;&#x6362;</h3>
<p>Egret&#x7684;<a href="http://developer.egret.com/cn/github/egret-docs/extension/RES/getway/index.html" target="_blank" rel="noopener">Res</a>&#x652F;&#x6301;&#x4ECE;&#x8FDC;&#x7A0B;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6216;&#x8005;&#x662F;&#x4ECE;&#x672C;&#x5730;&#x8BFB;&#x53D6;&#x8D44;&#x6E90;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5207;&#x6362;&#x4E0D;&#x540C;&#x7684;&#x8D44;&#x6E90;&#x52A0;&#x8F7D;&#x6A21;&#x5F0F;&#xFF0C;&#x6E38;&#x620F;&#x7684;&#x4EE3;&#x7801;&#x9700;&#x8981;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x7684;&#x65B9;&#x5F0F;&#x9009;&#x62E9;&#x76F8;&#x5E94;&#x7684;&#x52A0;&#x8F7D;&#x8FDC;&#xFF0C;&#x5728;&#x81EA;&#x52A8;&#x6784;&#x5EFA;&#x7684;&#x9636;&#x6BB5;&#x6839;&#x636E;&#x8C03;&#x7528;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002; &#x7136;&#x800C;&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x662F;&#x63A7;&#x5236;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x7684;&#x52A0;&#x8F7D;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;Egret&#x7684;RES&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F;&#x7684;&#x8D44;&#x6E90;API&#x5148;&#x52A0;&#x8F7D;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x4FE1;&#x606F;&#x51B3;&#x5B9A;Egret&#x5F15;&#x64CE;&#x52A0;&#x8F7D;&#x672C;&#x5730;&#x6216;&#x8005;&#x662F;&#x8FDC;&#x7A0B;&#x7684;&#x9879;&#x76EE;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4EE5;&#x53CA;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">&quot;res&quot;</span>:{</span><br><span class="line">        <span class="attr">&quot;use_remote&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;remote_url&quot;</span>: <span class="string">&quot;https://xxxx.xxxgame.cn/resource/&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;remote_json_url&quot;</span>:<span class="string">&quot;https://xxxx.xxxgame.cn/resource/default.res.json&quot;</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(cisconf.res.use_remote){</span><br><span class="line">  egret.log(<span class="string">&quot;Load RemoteRes: &quot;</span>+cisconf.res.remote_json_url);</span><br><span class="line">  <span class="keyword">await</span> RES.loadConfig(cisconf.res.remote_json_url,cisconf.res.remote_url);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">else</span>{</span><br><span class="line">  egret.log(<span class="string">&quot;Load LocalRes&quot;</span>);</span><br><span class="line">  <span class="keyword">await</span> RES.loadConfig(<span class="string">&quot;resource/default.res.json&quot;</span>, <span class="string">&quot;resource/&quot;</span>);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="gulpfile.js">GulpFile.js</h2>
<p>gulpfile.js&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x4FEE;&#x6539;&#x4F7F;&#x7528;&#x3002;</p>
<p><a href="https://gist.github.com/soyemi/b21f769a36d31ece7e99a954c11877e6" target="_blank" rel="noopener">&#x4F7F;&#x7528;Gulp&#x6784;&#x5EFA;Egret&#x5FAE;&#x4FE1;&#x5C0F;&#x6E38;&#x620F; &#xB7; GitHub</a></p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://artwork.yemi.me/">Artworks</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#项目需求"><span class="toc-number">1.</span> <span class="toc-text">项目需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quick-start"><span class="toc-number">2.</span> <span class="toc-text">Quick Start</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建开发说明"><span class="toc-number">3.</span> <span class="toc-text">构建开发说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置文件"><span class="toc-number">3.1.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#同步egertweixinsupport到导出的微信工程"><span class="toc-number">3.2.</span> <span class="toc-text">同步EgertWeixinSupport到导出的微信工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#通过命令行启动微信开发者工具"><span class="toc-number">3.3.</span> <span class="toc-text">通过命令行启动微信开发者工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用tiny-png进行图片压缩"><span class="toc-number">3.4.</span> <span class="toc-text">使用Tiny Png进行图片压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json压缩"><span class="toc-number">3.5.</span> <span class="toc-text">Json压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#egret使用远程资源与本地资源模式切换"><span class="toc-number">3.6.</span> <span class="toc-text">Egret使用远程资源与本地资源模式切换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gulpfile.js"><span class="toc-number">4.</span> <span class="toc-text">GulpFile.js</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&text=使用Gulp构建Egret微信小游戏"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&is_video=false&description=使用Gulp构建Egret微信小游戏"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=使用Gulp构建Egret微信小游戏&body=Check out this article: http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&title=使用Gulp构建Egret微信小游戏"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yemi.me/2018/06/12/build-egret-wechatgame-with-gulp/&name=使用Gulp构建Egret微信小游戏&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 yemi
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://artwork.yemi.me/">Artworks</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-117987782-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'yemiblog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


