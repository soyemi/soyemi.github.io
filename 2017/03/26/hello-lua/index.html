<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="在游戏开发中，Lua是一种比较热门的轻量级脚本语言。由C实现的Lua可以很好得和C/C++进行交互，同时它可以很方便地和和各种语言结合进行跨平台开发。 特别是在当前最流行的游戏Unity中，为了实现C#脚本热更新，Lua几乎是唯一的解决方案，各种基于Lua的库层出不穷。一直在写C#脚本，还是有必要学习Lua。 ###Lua初见 一开始就直接打开Lua官方的Reference Manual Lu">
<meta name="keywords" content="C++,Lua">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello Lua">
<meta property="og:url" content="http://yemi.me/2017/03/26/hello-lua/index.html">
<meta property="og:site_name" content="Yemi&#39;s Blog">
<meta property="og:description" content="在游戏开发中，Lua是一种比较热门的轻量级脚本语言。由C实现的Lua可以很好得和C/C++进行交互，同时它可以很方便地和和各种语言结合进行跨平台开发。 特别是在当前最流行的游戏Unity中，为了实现C#脚本热更新，Lua几乎是唯一的解决方案，各种基于Lua的库层出不穷。一直在写C#脚本，还是有必要学习Lua。 ###Lua初见 一开始就直接打开Lua官方的Reference Manual Lu">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-07-21T10:24:52.724Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello Lua">
<meta name="twitter:description" content="在游戏开发中，Lua是一种比较热门的轻量级脚本语言。由C实现的Lua可以很好得和C/C++进行交互，同时它可以很方便地和和各种语言结合进行跨平台开发。 特别是在当前最流行的游戏Unity中，为了实现C#脚本热更新，Lua几乎是唯一的解决方案，各种基于Lua的库层出不穷。一直在写C#脚本，还是有必要学习Lua。 ###Lua初见 一开始就直接打开Lua官方的Reference Manual Lu">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.png">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
          
        
    
    <!-- title -->
    <title>Hello Lua</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://artwork.yemi.me/">Artworks</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2017/06/04/dirextx-learn-1/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2016/12/11/Unity-shader-Note/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yemi.me/2017/03/26/hello-lua/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yemi.me/2017/03/26/hello-lua/&text=Hello Lua"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yemi.me/2017/03/26/hello-lua/&is_video=false&description=Hello Lua"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Hello Lua&body=Check out this article: http://yemi.me/2017/03/26/hello-lua/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yemi.me/2017/03/26/hello-lua/&name=Hello Lua&description=&lt;p&gt;在游戏开发中，Lua是一种比较热门的轻量级脚本语言。由C实现的Lua可以很好得和C/C++进行交互，同时它可以很方便地和和各种语言结合进行跨平台开发。 特别是在当前最流行的游戏Unity中，为了实现C#脚本热更新，Lua几乎是唯一的解决方案，各种基于Lua的库层出不穷。一直在写C#脚本，还是有必要学习Lua。&lt;/p&gt;
&lt;p&gt;###Lua初见&lt;/p&gt;
&lt;p&gt;一开始就直接打开Lua官方的Reference Manual &lt;a href=&#34;http://www.lua.org/manual/5.3/contents.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Lua Reference Manual&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;接下来下载好Lua的binary版本，开始学习基本的语法 &lt;a href=&#34;http://www.runoob.com/lua/lua-tutorial.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Lua 基础教程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;总体感觉Lua非常的轻巧 基础的数据类型也只有&lt;code&gt;nil boolean number string function userdata thread table&lt;/code&gt; (整形和浮点都是number 想起了SQLite) 动态类型语言和Javascript一样 结尾不需要；和Python一样 函数可以是多返回值 没有自带的++ +=等运算符，写的时候特别难受...T_T&lt;/p&gt;
&lt;p&gt;但是有metatable可以进行任意的扩展，这个metatable给我的感觉就像是JS中的prototype&lt;/p&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#开始实现"><span class="toc-number">1.</span> <span class="toc-text">开始实现</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Hello Lua
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">Yemi's Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-03-26T15:31:09.000Z" itemprop="datePublished">2017-03-26</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/C/">C++</a>, <a class="tag-link" href="/tags/Lua/">Lua</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>&#x5728;&#x6E38;&#x620F;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;Lua&#x662F;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x70ED;&#x95E8;&#x7684;&#x8F7B;&#x91CF;&#x7EA7;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x3002;&#x7531;C&#x5B9E;&#x73B0;&#x7684;Lua&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5F97;&#x548C;C/C++&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x548C;&#x548C;&#x5404;&#x79CD;&#x8BED;&#x8A00;&#x7ED3;&#x5408;&#x8FDB;&#x884C;&#x8DE8;&#x5E73;&#x53F0;&#x5F00;&#x53D1;&#x3002; &#x7279;&#x522B;&#x662F;&#x5728;&#x5F53;&#x524D;&#x6700;&#x6D41;&#x884C;&#x7684;&#x6E38;&#x620F;Unity&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;C#&#x811A;&#x672C;&#x70ED;&#x66F4;&#x65B0;&#xFF0C;Lua&#x51E0;&#x4E4E;&#x662F;&#x552F;&#x4E00;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5404;&#x79CD;&#x57FA;&#x4E8E;Lua&#x7684;&#x5E93;&#x5C42;&#x51FA;&#x4E0D;&#x7A77;&#x3002;&#x4E00;&#x76F4;&#x5728;&#x5199;C#&#x811A;&#x672C;&#xFF0C;&#x8FD8;&#x662F;&#x6709;&#x5FC5;&#x8981;&#x5B66;&#x4E60;Lua&#x3002;</p>
<p>###Lua&#x521D;&#x89C1;</p>
<p>&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x76F4;&#x63A5;&#x6253;&#x5F00;Lua&#x5B98;&#x65B9;&#x7684;Reference Manual <a href="http://www.lua.org/manual/5.3/contents.html" target="_blank" rel="noopener">Lua Reference Manual</a></p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x4E0B;&#x8F7D;&#x597D;Lua&#x7684;binary&#x7248;&#x672C;&#xFF0C;&#x5F00;&#x59CB;&#x5B66;&#x4E60;&#x57FA;&#x672C;&#x7684;&#x8BED;&#x6CD5; <a href="http://www.runoob.com/lua/lua-tutorial.html" target="_blank" rel="noopener">Lua &#x57FA;&#x7840;&#x6559;&#x7A0B;</a></p>
<p>&#x603B;&#x4F53;&#x611F;&#x89C9;Lua&#x975E;&#x5E38;&#x7684;&#x8F7B;&#x5DE7; &#x57FA;&#x7840;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E5F;&#x53EA;&#x6709;<code>nil boolean number string function userdata thread table</code> (&#x6574;&#x5F62;&#x548C;&#x6D6E;&#x70B9;&#x90FD;&#x662F;number &#x60F3;&#x8D77;&#x4E86;SQLite) &#x52A8;&#x6001;&#x7C7B;&#x578B;&#x8BED;&#x8A00;&#x548C;Javascript&#x4E00;&#x6837; &#x7ED3;&#x5C3E;&#x4E0D;&#x9700;&#x8981;&#xFF1B;&#x548C;Python&#x4E00;&#x6837; &#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x591A;&#x8FD4;&#x56DE;&#x503C; &#x6CA1;&#x6709;&#x81EA;&#x5E26;&#x7684;++ +=&#x7B49;&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5199;&#x7684;&#x65F6;&#x5019;&#x7279;&#x522B;&#x96BE;&#x53D7;...T_T</p>
<p>&#x4F46;&#x662F;&#x6709;metatable&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4EFB;&#x610F;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x8FD9;&#x4E2A;metatable&#x7ED9;&#x6211;&#x7684;&#x611F;&#x89C9;&#x5C31;&#x50CF;&#x662F;JS&#x4E2D;&#x7684;prototype</p>
<a id="more"></a>
<p>###&#x5B9A;&#x4E2A;&#x5C0F;&#x76EE;&#x6807;</p>
<p>&#x5728;&#x719F;&#x6089;&#x4E86;&#x57FA;&#x672C;&#x7684;&#x8BED;&#x6CD5;&#x548C;&#x8FD0;&#x7B97;&#x540E;&#xFF0C;&#x51C6;&#x5907;&#x8BD5;&#x8BD5;Lua&#x7684;&#x70ED;&#x66F4;&#x65B0;&#x3002;&#x4E4B;&#x524D;&#x5728;github&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;GUI&#x5E93;imgui&#xFF0C;imgui&#x662F;&#x4E00;&#x4E2A;immediate mode gui&#x5E93;&#x3002;&#x4EC0;&#x4E48;&#x662F;immediate mode gui&#x5462;&#xFF0C;&#x5C31;&#x662F;&#x548C;&#x901A;&#x5E38;&#x7684;&#x4E8B;&#x4EF6;&#x56DE;&#x8C03;&#x5F0F;&#x7684;GUI&#x6846;&#x67B6;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x6240;&#x6709;&#x7684;UI&#x903B;&#x8F91;&#x662F;&#x7EBF;&#x6027;&#x7684;&#xFF0C;&#x548C;Unity&#x4E2D;&#x7684;EditorGUI&#x4E00;&#x6837;&#xFF0C;&#x9700;&#x8981;&#x4E0D;&#x65AD;&#x7684;&#x5237;&#x65B0;&#x3002;&#x5927;&#x6982;&#x5C31;&#x662F;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x7684;&#x6837;&#x5B50; <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gui.Label(&quot;This is a label&quot;);</span><br><span class="line">if(gui.button(&quot;This is a button&quot;))</span><br><span class="line">{</span><br><span class="line">	//process button click</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5DE5;&#x4F5C;&#x4E2D;&#x4E00;&#x76F4;&#x5728;&#x5199;&#x4E00;&#x4E9B;Unity&#x7684;&#x63D2;&#x4EF6;&#x53CA;&#x7F16;&#x8F91;&#x5668;&#x811A;&#x672C;&#xFF0C;&#x633A;&#x559C;&#x6B22;IMGUI&#x8FD9;&#x79CD;&#x5FEB;&#x901F;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;UI&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x662F;&#x6709;&#x7F3A;&#x70B9;&#x7684;&#xFF0C;&#x6BD4;&#x5982;UI&#x903B;&#x8F91;&#x592A;&#x590D;&#x6742;&#x65F6;&#x5019;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x5F71;&#x54CD;&#x7ED8;&#x5236;&#x5E27;&#x7387;&#x9020;&#x6210;&#x5361;&#x987F;&#x3002;&#x6216;&#x8005;&#x662F;&#x592A;&#x590D;&#x6742;&#x7684;UI&#x7ED3;&#x6784;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x5C31;&#x5927;&#x5927;&#x964D;&#x4F4E;&#x3002; &#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6709;&#x4E86;Lua &#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x662F;&#x4E0D;&#x662F;&#x53EF;&#x4EE5;&#x7528;IMGUI&#x7ED8;&#x5236;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x91CC;&#x9762;&#x7F16;&#x5199;Lua&#x811A;&#x672C;&#xFF0C;&#x901A;&#x8FC7;Lua&#x8C03;&#x7528; C++&#x7684;imgui&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x66F4;&#x65B0;UI&#x5462;&#x3002; &#x8FD9;&#x6837;&#x5C31;&#x50CF;&#x5199;Unity&#x7684;Editor&#x6269;&#x5C55;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x7F16;&#x8BD1;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x52A0;&#x8F7D;&#x4E0D;&#x540C;&#x7684;Lua&#x811A;&#x672C;&#x5C31;&#x80FD;&#x5B9E;&#x73B0;&#x70ED;&#x66F4;&#x65B0;UI&#x3002;</p>
<p>&#x603B;&#x7ED3;&#x8D77;&#x6765;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x4E00;&#x4E0B;&#x51E0;&#x6B65; + &#x5728;windows&#x4E0B;&#x5F00;&#x53D1; windows&#x7A0B;&#x5E8F;&#xFF0C;&#x8C03;&#x7528;imgui C++&#x5E93; + &#x914D;&#x7F6E;Lua&#x73AF;&#x5883; &#x6267;&#x884C;Lua&#x811A;&#x672C; + &#x7F16;&#x5199;Lua&#x8C03;&#x7528;imgui&#x7684;C&#x51FD;&#x6570;&#xFF0C;&#x4E92;&#x8C03;&#x7528;&#x64CD;&#x4F5C; + &#x5728;imgui&#x4E2D;&#x5237;&#x65B0;Lua&#x811A;&#x672C;</p>
<h3 id="&#x5F00;&#x59CB;&#x5B9E;&#x73B0;">&#x5F00;&#x59CB;&#x5B9E;&#x73B0;</h3>
<p><strong>&#x521B;&#x5EFA;&#x5DE5;&#x7A0B;</strong> imgui&#x5728;github&#x4E0A;&#x7684;repo&#x6709;demo &#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x62FF;&#x6765;&#x6539;&#x5C31;&#x884C;&#x4E86;&#x3002;&#x9009;&#x4E86;&#x7528;opengl&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#xFF0C;&#x800C;&#x4E0D;&#x662F;dx&#x3002;&#x6BD5;&#x7ADF;&#x6709;GLFW GLEW&#x6BD4;DX&#x7684;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x591A;&#x4E86;&#x3002;</p>
<p><strong>&#x914D;&#x7F6E;Lua</strong> &#x628A;&#x51E0;&#x4E2A;Lua&#x5934;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#x52A0;&#x5165;Include + Lua.h lualib.h &#x5B9A;&#x4E49;&#x4E86;Lua&#x7684;&#x57FA;&#x672C;&#x65B9;&#x6CD5; + lauxlib.h &#x91CC;&#x9762;&#x6709;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x5E38;&#x7528;&#x7684;&#x6269;&#x5C55;&#x65B9;&#x6CD5; + luaconf.h &#x7528;&#x6765;&#x63A7;&#x5236;&#x6A21;&#x5757;&#x7684;&#x5F00;&#x5173;</p>
<p>Lib&#x5C31;&#x53EA;&#x6709;&#x4E00;&#x4E2A;lua53.lib</p>
<p><strong>Lua&#x548C;C++&#x7684;&#x4E92;&#x8C03;&#x7528;</strong> &#x5904;&#x7406;Lua&#x4E0E;C++&#x7684;&#x4E92;&#x8C03;&#x7528;&#x90FD;&#x9700;&#x8981;&#x901A;&#x8FC7;Lua C Api&#x6765;&#x8FDB;&#x884C;</p>
<p>&#x5728;Lua5.3&#x4E2D; &#x9700;&#x8981;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;lua_State &#x6765;&#x8FDB;&#x884C;&#x4E92;&#x64CD;&#x4F5C; Lua&#x8C03;&#x7528;C++&#x9700;&#x8981;&#x5148;&#x5B9A;&#x4E49;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x5FC5;&#x987B;&#x5E26;&#x6709;lua_State&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;Lua&#x548C;C&#x4EA4;&#x4E92;&#x662F;&#x901A;&#x8FC7;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x6808;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;Lua&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x65F6;&#x4F1A;&#x5148;&#x628A;&#x65B9;&#x6CD5;&#x548C;&#x53C2;&#x6570;&#x4E00;&#x4E2A;&#x4E2A;push&#x5165;&#x6808;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;C&#x65B9;&#x6CD5;&#x4F1A;pop&#x51FA;&#x53C2;&#x6570;&#x6267;&#x884C;&#x5B8C;&#x518D;&#x628A;&#x7ED3;&#x679C;&#x538B;&#x5165;&#x6808;&#x8FD4;&#x56DE;&#x7ED9;Lua&#x7684;&#x811A;&#x672C; <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&#x58F0;&#x660E;&#x65B9;&#x6CD5;</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">luaTestFunc</span><span class="params">(lua_State *state)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">	<span class="comment">//some implement</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#x521D;&#x59CB;&#x5316;lua_State</span></span><br><span class="line">lua_State * lstate = luaL_newstate();</span><br><span class="line"><span class="comment">//&#x52A0;&#x8F7D;lua&#x57FA;&#x7840;&#x5E93;</span></span><br><span class="line">luaL_oepnlibs(lstate);</span><br><span class="line"><span class="comment">//&#x6CE8;&#x518C;&#x65B9;&#x6CD5;</span></span><br><span class="line">lua_register(lstate,<span class="string">&quot;luaTestFunc&quot;</span>,luaTestFunc);</span><br></pre></td></tr></table></figure></p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;Lua&#x4E2D;&#x8C03;&#x7528;<code>luaTestFunc()</code></p>
<p>github&#x4E0A;&#x6709;imgui lua&#x7684;wrap &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#xFF0C;&#x5C31;&#x4E0D;&#x9700;&#x58F0;&#x660E;&#x90A3;&#x4E48;&#x591A;&#x65B9;&#x6CD5;&#x4E86;</p>
<p>C++&#x8C03;&#x7528;Lua&#x65B9;&#x6CD5; &#x4F7F;&#x7528;<code>luaL_loadstring(lua_State*,const char * luacode)</code> &#x6765;&#x52A0;&#x8F7D;&#x4EE3;&#x7801; &#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x6211;&#x4EEC;&#x8981;&#x628A;&#x9700;&#x8981;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;push&#x5230;&#x6808;&#x9876;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;<code>lua_call()</code> &#x5C31;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4E86;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x8C03;&#x7528;&#x4E86;<code>lua_call</code> &#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x4F7F;&#x7528;<code>lua_getglobal()</code> push&#x5230;&#x6808;&#x9876;&#x7684;&#x65B9;&#x6CD5;&#x4F1A;&#x88AB;pop&#x51FA;&#x6808;&#x3002;&#x5728;imgui&#x4E2D;&#x6BCF;&#x4E00;&#x5E27;&#x5FAA;&#x73AF;&#x90FD;&#x8981;&#x8C03;&#x7528;imgui&#x7684;&#x7ED8;&#x5236;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x8981;&#x91CD;&#x590D;&#x8C03;&#x7528;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x5C31;&#x9700;&#x8981;&#x5728;&#x8C03;&#x7528;&#x524D;&#x8BB2;&#x5176;push&#x5230;&#x6808;&#x9876;&#xFF08;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#xFF09;&#x3002;&#x4E0D;&#x8FD9;&#x6837;&#x64CD;&#x4F5C;&#x53EF;&#x80FD;&#x4F1A;&#x62A5;&#x9519;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5982; <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lua syntax error:attempt to call a nil value</span><br><span class="line">lua syntax error:attempt to call a string value</span><br><span class="line">lua syntax error:attempt to call a string value</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x6837;&#x7684;&#x9519;&#x8BEF;&#x5176;&#x5B9E;&#x662F;&#x8C03;&#x7528;lua_call &#x53D1;&#x73B0;&#x5728;&#x6808;&#x9876;&#x7684;&#x4E0D;&#x662F;&#x51FD;&#x6570;&#x5148;&#x62A5;&#x9519; nil value&#xFF0C;&#x7136;&#x540E;lua&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;error string push&#x5230;&#x6808;&#x9876; &#x6240;&#x4EE5;&#x4E0B;&#x6B21;&#x8C03;&#x7528;call&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;string value&#xFF0C;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x4E0B;&#x53BB;...</p>
<p>&#x66F4;&#x591A;&#x7684;Lua C++&#x7684;&#x4E92;&#x8C03;&#x7528;&#x53EF;&#x4EE5;&#x53C2;&#x8003; <a href="https://csl.name/post/lua-and-cpp/" target="_blank" rel="noopener">Lua C++&#x4E92;&#x8C03;&#x7528;</a></p>
<p>** &#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x7F16;&#x5199;&#x597D;&#x7684;Lua&#x811A;&#x672C; ** &#x5F53;&#x6211;&#x4EEC;&#x66F4;&#x65B0;&#x4E86;lua&#x811A;&#x672C;&#x4E4B;&#x540E;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#xFF0C;&#x9996;&#x5148;&#x8C03;&#x7528; <code>lua_close()</code> &#x56DE;&#x6536;lua_State&#xFF0C;&#x63A5;&#x7740;&#x5C31;&#x662F;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;lua&#x57FA;&#x672C;&#x5E93;&#x548C;imgui&#x7684;&#x5E93;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x52A0;&#x8F7D;&#x5E93;&#x662F;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#x95F4;&#x7684;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x5378;&#x8F7D;&#x6389;&#x52A0;&#x8F7D;&#x7684;&#x4EE3;&#x7801;&#x5757;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;Lua&#x811A;&#x672C;&#x3002;</p>
<p>###&#x603B;&#x7ED3; Lua&#x7684;&#x6808;&#x64CD;&#x4F5C;&#x8FD8;&#x662F;&#x4E0D;&#x592A;&#x4E60;&#x60EF;&#xFF0C;&#x603B;&#x4F53;&#x611F;&#x89C9;Lua&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x7B80;&#x6D01;&#x6613;&#x7528;&#x7684;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x3002;&#x6A21;&#x5757;&#x7BA1;&#x7406;&#xFF0C;&#x57FA;&#x672C;&#x5E93;&#xFF0C;metadata&#x7B49;&#x7279;&#x6027;&#x8FD8;&#x9700;&#x8981;&#x518D;&#x6DF1;&#x5165;&#x63A5;&#x89E6;&#x4E00;&#x4E0B;&#x3002; &#x5728;&#x8C03;&#x8BD5;&#x4E92;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#x8FD8;&#x662F;&#x8E29;&#x4E86;&#x5F88;&#x591A;&#x5751;&#xFF0C;&#x9700;&#x8981;&#x597D;&#x597D;&#x4E86;&#x89E3;&#x4E0B;Lua C Api&#x3002;&#x57FA;&#x4E8E;Lua&#x7684;imgui UI&#x6269;&#x5C55;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x5B8C;&#x5584;&#x5B8C;&#x5584;&#x3002;</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://artwork.yemi.me/">Artworks</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#开始实现"><span class="toc-number">1.</span> <span class="toc-text">开始实现</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yemi.me/2017/03/26/hello-lua/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yemi.me/2017/03/26/hello-lua/&text=Hello Lua"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yemi.me/2017/03/26/hello-lua/&is_video=false&description=Hello Lua"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Hello Lua&body=Check out this article: http://yemi.me/2017/03/26/hello-lua/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yemi.me/2017/03/26/hello-lua/&title=Hello Lua"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yemi.me/2017/03/26/hello-lua/&name=Hello Lua&description=&lt;p&gt;在游戏开发中，Lua是一种比较热门的轻量级脚本语言。由C实现的Lua可以很好得和C/C++进行交互，同时它可以很方便地和和各种语言结合进行跨平台开发。 特别是在当前最流行的游戏Unity中，为了实现C#脚本热更新，Lua几乎是唯一的解决方案，各种基于Lua的库层出不穷。一直在写C#脚本，还是有必要学习Lua。&lt;/p&gt;
&lt;p&gt;###Lua初见&lt;/p&gt;
&lt;p&gt;一开始就直接打开Lua官方的Reference Manual &lt;a href=&#34;http://www.lua.org/manual/5.3/contents.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Lua Reference Manual&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;接下来下载好Lua的binary版本，开始学习基本的语法 &lt;a href=&#34;http://www.runoob.com/lua/lua-tutorial.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Lua 基础教程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;总体感觉Lua非常的轻巧 基础的数据类型也只有&lt;code&gt;nil boolean number string function userdata thread table&lt;/code&gt; (整形和浮点都是number 想起了SQLite) 动态类型语言和Javascript一样 结尾不需要；和Python一样 函数可以是多返回值 没有自带的++ +=等运算符，写的时候特别难受...T_T&lt;/p&gt;
&lt;p&gt;但是有metatable可以进行任意的扩展，这个metatable给我的感觉就像是JS中的prototype&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2019 yemi
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://artwork.yemi.me/">Artworks</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/projects/">Projects</a></li>
         
          <li><a href="/Search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-117987782-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'yemiblog';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


